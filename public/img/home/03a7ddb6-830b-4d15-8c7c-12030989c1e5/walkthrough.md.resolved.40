# 工作報告：遊戲廠商管理模組重構

為了更精確地符合營運管理需求，我已將「遊戲平台管理」模組全面升級為「遊戲廠商管理」，並重構了其數據展示與搜尋邏輯。

## 變更內容

### 1. 模組更名與語意優化
- **標題更名**: 全系統（導覽列、頁面標題、對話框）已將「遊戲平台管理」統一更新為「**遊戲廠商管理**」。
- **欄位語意**: 調整部分欄位名稱，使其更符合業界慣用術語（如：廠商代碼、平台類型）。

### 2. 搜尋條件擴充
新增了以下搜尋維度，方便管理員進行精準篩選：
- **廠商代碼**: 已由文字輸入升級為**下拉選擇器**，管理員可從列出的已串接廠商（如 PG, EVO 等）中直接選取。
- **平台類型**: 依據「電子、真人、體育、彩票、棋牌」進行分類搜尋。
- **狀態**: 快速查看「啟用、停用、維護中」的廠商。
- **時間區間**: 用於查詢區間內的投注與派彩表現。

### 3. 遊戲列表管理優化
針對遊戲列表的商業規則與介面進行了深度調整：
- **幣種統一**: 遊戲設定中的可遊玩幣種已統一更名為「**金幣、銀幣、銅幣**」，並已在多語系中同步。
- **欄位精簡與語義優化**: 
    - 列表中的「遊戲廠商管理」更名為「**廠商**」。
    - 「標籤來源」更名為「**類型標籤**」，並改為顯示遊戲實際類型（如：電子遊戲、真人遊戲）。
    - **有效流水比例**: 由「最終比例」更名，語義更直觀。
- **數據連結**: 實作了跨組件的廠商代碼與類型代碼檢索功能，確保搜尋與列表顯示的一致性。

### 4. 狀態管理重構 (Buffered Operations)
針對安全性與操作效率進行了大幅改進：
- **存取操作機制**: 列表中的開關變更現在會暫時記錄在緩存中，需點擊左上角的「**存取操作**」按鈕並通過**二次彈窗確認**後才會正式存入資料庫。
- **雙重狀態開關**:
    - **啟用**: 控制遊戲整體的營運狀態。
    - **維護**: 獨立開關，開啟時遊戲顯示為維護中。
- **UI 調整**: 
    - **列表**: 移除了舊版單一「狀態」欄位，改為僅顯示「啟用」與「維護」開關。
    - **排序**: 將「類型標籤」欄位調整至列表末端（操作欄位前），優化閱讀動線。
    - **搜尋**: 恢復了「狀態」搜尋條件，方便快速篩選特定狀態（含維護中）的遊戲。
- **搜尋優化**: 預設日期區間已設為**過去一週**。

### 5. 營運數據精準化 (遊戲列表)
針對營運監控需求，大幅強化了數據展示與搜尋能力：
- **核心指標：殺率**: 新增「殺率」欄位，具備自動色塊提醒（**正數綠色、負數紅色**），協助管理員快速識別異常損益。
- **維度擴充**: 
    - 支援**行銷標籤**（如：熱門、推薦）與**類型標籤**（系統、手動）篩選。
    - 引入**分鐘級時間區間**查詢，精確鎖定特定時段的「累計流水」。
- **手動調控**: 在編輯遊戲設定中新增「**有效流水比例**」參數，允許營運人員針對特定遊戲手動覆蓋系統計算的比例。
- **介面佈局**: 搜尋表單升級為 **Grid 網格佈局**，在容納更多搜尋條件的同時維持介面井然有序。

### 5. 廠商列表功能增強 (遊戲廠商管理)
移除技術導向欄位，替換為核心業務指標：
- **新增**: 當前遊玩人數、累計總投注、累計總派彩。
- **搜尋優化**: 廠商代碼由文字輸入升級為**下拉選擇器**，支援按平台類型與時間區間篩選。

### 6. 代碼品質維護
- 清理了多個組件中的冗餘導入與未使用的 ref 變數（如 [MarketingTag](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/types/game.ts#64-65)、`createFormRef` 等）。
- 修正了表格欄位對齊屬性的類型定義報錯。- **格式優化**: 金額欄位套用了 `$ ` 前綴與千分位格式化，提升數據可讀性。

### 6. 數據支撐 (Mock API)
- **類型擴充**: 更新了 [GameProvider](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/types/game.ts#35-49) 實體定義。
- **過濾邏輯**: Mock API 現在支援所有新增的搜尋條件，並會模擬時間區間內的數據變化。

## 驗證方法
1. **導覽功能**: 點擊導覽列中的「廠商管理」，確認進入正確頁面。
2. **搜尋測試**: 輸入「PG」或篩選「電子」類型，確認列表正確過濾。
3. **數據展示**: 確認列表顯示「當前遊玩人數」等新欄位，且金額顯示為 `$ 1,000` 格式。
4. **重置功能**: 點擊「全部」按鈕，確認搜尋條件恢復預設並重整數據。
