# 遊戲廠商管理模組重構計劃

本計劃旨在將「遊戲平台管理」更名為「遊戲廠商管理」，並優化搜尋條件與展示欄位，使其更貼合實際營運監控需求。

## 變更項目

### 1. 語系與導覽 (`src/locales/index.ts`)
- [x] 將 `game.provider.title` 由「遊戲平台管理」改為「遊戲廠商管理」。
- [x] 將導覽列關鍵字由「平台管理」改為「廠商管理」。
- [x] 新增欄位語系：`vendorCode` (廠商代碼), `platformType` (平台類型), `currentPlayers` (當前遊玩人數), `totalBet` (累計總投注), `totalPayout` (累計總派彩)。

### 2. 資料模型與 Mock API (`src/types/game.ts`, `src/api/provider.ts`)
- [x] 在 `GameProvider` 接口中加入 `current_players`, `total_bet`, `total_payout` 欄位。
- [x] 定義 `ProviderSearchParams` 搜尋參數接口。
- [x] 更新 `mockProviders` 資料集，加入模擬的營運數據。
- [x] 修改 `getProviders` 函數，實作基於廠商代碼、類型、狀態與日期區間的過濾邏輯。

### 3. UI 介面重構 (`src/views/Master/GameProviders.vue`)
- [x] **搜尋表單**: 加入廠商代碼、平台類型、狀態與時間區間的搜尋項。
- [x] **資料表格**:
    - 移除：支援錢包、最後操作人、更新時間。
    - 新增：當前遊玩人數、累計總投注、累計總派彩。
    - 金額格式化：顯示為 `$ 1,000,000`。
- [x] **操作邏輯**: 實作重置搜尋條件與 enter 鍵觸發搜尋。

### 4. 遊戲列表管理優化 (`src/views/Master/GameList.vue`, `src/locales/index.ts`)
- [x] **多語系**: 在 `game.list` 下新增 `vendor` 鍵值（繁中：廠商、簡中：厂商、英文：Vendor）。
- [x] **幣種更名**: 將遊戲設定中的可遊玩幣種選項補齊並統一為「金幣、銀幣、銅幣」。
- [x] **列表欄位**:
    - 將「遊戲廠商管理」欄位更名為「廠商」。
    - 顯示內容由原有的廠商 ID 改為顯示「廠商代碼」。
- [x] **搜尋表單**: 同步更換搜尋區塊的廠商標籤名稱。

---

### [NEW] 遊戲列表進階功能
- [x] **搜尋增強**: 
    - 新增「行銷標籤」、「類型標籤」篩選。
    - 新增「時間區間」搜尋，支援精確至分鐘。
- [x] **欄位調整**:
    - 「本月流水」更名為「累計流水」。
    - 「標籤來源」更名為「類型標籤」。
    - 新增「殺率」欄位，公式：`((總投注 - 總派彩) / 總投注) * 100%`。
- [x] **視覺優化**:
    - 殺率欄位：正數顯示綠色，負數顯示紅色。
    - 搜尋表單改為 Grid 佈局，優化多條件顯示。
- [x] **標籤內容修正**:
    - 「類型標籤」欄位對應至實際的遊戲類型（如：電子、真人），而非系統/手動來源。
    - 「最終比例」更名為「有效流水比例」。

---

### [NEW] 狀態管理重構與緩存操作
- [x] **預設條件**: 搜尋時間範圍預設為**過去一週**。
- [x] **狀態拆分**:
    - 「啟用」開關：控制遊戲開啟/停用。
    - 「維護」開關：控制遊戲是否進入維護模式。
- [x] **緩存機制**: 
    - 列表中的開關操作不直接觸發 API，而是記錄在 `pendingChanges` 緩存中。
    - 新增「**存取操作**」按鈕，統一提交變更。
- [x] **確認提示**: 提交時彈窗確認「確定要存取狀態變更?」。
- [x] **狀態調整**:
    - 恢復搜尋條件中的「狀態」選單（可選：啟用、停用、維護中）。
    - 移除列表中舊版的單一「狀態」欄位，僅保留新的「啟用」與「維護」開關。
- [x] **參數擴充**:
    - 在編輯視窗新增「有效流水比例」輸入欄位 (0-1000%)。
    - API 邏輯更新：若有手動設定比例，優先使用該值。

## 驗證計劃
- [x] 驗證導覽與頁面標題是否正確更名。

### [NEW] 玩家詳情增強
- [x] **基本資料擴充**: 在玩家詳情頁面新增顯示「註冊 IP」與「最後登入 IP」。
- [x] 測試各項搜尋過濾條件是否準確。
- [x] 確認金額欄位顯示了正確的前綴與千分位。
- [x] 檢查代碼中是否有殘留的未使用導入。
