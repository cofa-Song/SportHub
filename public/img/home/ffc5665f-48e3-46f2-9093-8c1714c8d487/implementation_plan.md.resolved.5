# 實作計畫：儲值訂單管理 (OPE-601)

本計畫旨在建立一個多維度的儲值訂單監控與管理介面，包含即時數據分析、趨勢圖表及詳細的操作紀錄。

## 使用者審閱確認

> [!IMPORTANT]
> **圖表程式庫選擇**：由於專案目前未安裝圖表庫，我將在 [DepositOrders.vue](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/views/Master/DepositOrders.vue) 中動態載入 `echarts`  CDN 或建議安裝 `echarts` 依賴。為確保穩定性，本計畫優先採用 Naive UI 配合自定義畫布或現有圖表元件。

## 擬議變更

### 1. 資料模型與 API

#### [NEW] [depositOrder.ts](file:///c:/Users/Administrator/Desktop/營運後台/src/types/depositOrder.ts)
- 定義 [DepositOrder](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/types/depositOrder.ts#5-20) 介面。
- 定義 [DepositStats](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/types/depositOrder.ts#21-29) (看板數據) 與 `TrendData` (趨勢圖) 類型。

#### [NEW] [depositOrder.ts](file:///c:/Users/Administrator/Desktop/營運後台/src/mocks/depositOrder.ts)
- 生成模擬訂單數據，包含各個狀態、渠道、金額及手續費。
- 提供符合 OPE-601 邏輯的統計聚合方法。

#### [NEW] [depositOrder.ts](file:///c:/Users/Administrator/Desktop/營運後台/src/api/depositOrder.ts)
- [list](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/api/depositOrder.ts#8-28): 取得訂單列表。
- [stats](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/api/depositOrder.ts#29-60): 取得頂部看板數據。
- [trend](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/api/depositOrder.ts#61-77): 取得趨勢分析數據。
- [sync](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/api/depositOrder.ts#78-82): 查單功能。
- [manualComplete](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/api/depositOrder.ts#83-87): 人工補單。
- [logs](file:///c:/Users/Administrator/Desktop/%E7%87%9F%E9%81%8B%E5%BE%8C%E5%8F%B0/src/api/depositOrder.ts#88-100): 取得訂單生命週期日誌。

### 2. 前端介面實作

#### [NEW] [DepositOrders.vue](file:///c:/Users/Administrator/Desktop/營運後台/src/views/Master/DepositOrders.vue)
- **頂部數據看板**：使用 `NGrid` 與 `NCard` 顯示統計指標（總額、手續費、訂單數），並內嵌圓餅圖。
- **中間趨勢圖**：使用 ECharts 展示成功金額曲線與訂單數長條圖，並標註紅線預警。
- **查詢條件**：日期範圍、玩家 ID、狀態、渠道、單號過濾。
- **數據列表**：展示詳細訂單欄位，支援跳轉、查單、補單與日誌詳情。

### 4. 科技高端化改造 (Premium Tech UI Overhaul)
- **視覺風格定義**：捨棄標準白色底色，引入「深邃/專業」調性。
    - **背景與表面**：使用帶有微弱漸層的深色系背景，卡片採用「玻璃擬態 (Glassmorphism)」效果，背景模糊搭配細微邊框光效。
    - **配色方案**：採用 **Vibrant Cyan (青色)** 與 **Neon Indigo (靛紫)** 作為核心裝飾色。
- **圖表高端化 (ECharts Advanced)**：
    - **自定義主題**：使用深色系底圖，加入動態流光線條。
    - **科技感裝飾**：圖表加入「電子掃描線」或「精密網格」遮罩效果。
- **數值展示**：採用 **Monospace (等寬)** 數位字體，模仿資料中心終端感。
- **微交互**：加入更平滑的卡片上浮與輝光 (Glow) 效果。

---

## 驗證計畫

### 自動化/手動測試
1. **數據一致性**：點擊過濾後，看板、圖表與列表數據必須同步更新。
2. **手續費試算**：驗證 iOS 訂單（30% 手續費）在列表中的顯示是否正確。
3. **查單/補單流**：模擬查單成功後狀態變更為「成功」；驗證補單時憑證上傳與必填項檢查。
4. **日誌完整性**：確認日誌彈窗包含狀態變遷與原始 JSON 數據。
